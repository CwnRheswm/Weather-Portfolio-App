define(["jquery","underscore","backbone","../Current/current.min","../Current/currentView.min"],function(a,b,c,d,e){"use strict";var f="localhost"===window.location.hostname,g=c.Model.extend({defaults:{currently:[],hourly:[],forecast:[],city:"",state:"",latitude:0,longitude:0,skyIcon:"",temperature:0,maxTemp:0,minTemp:0,windIcon:"",windKnots:0,windSpeed:0,windUnits:"",windBearing:0,windDirection:0,dateFormatted:"",ready:!1},urlRoot:"https://api.forecast.io/forecast/",url:function(){new Date;return this.urlRoot+"2cfdbe1e25142f76c4233746c835ac77/"+this.get("latitude")+","+this.get("longitude")},sync:function(c,d,e){if(f){var g={latitude:34.4480495,longitude:-119.242889,timezone:"America/Los_Angeles",offset:-7,currently:{time:1427145438,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:69.13,apparentTemperature:69.13,dewPoint:51.59,humidity:.54,windSpeed:26.05,windBearing:120,visibility:9.99,cloudCover:.06,pressure:1019.88,ozone:331.51},minutely:{data:[{time:1427145420,precipIntensity:0,precipProbability:0},{time:1427145480,precipIntensity:0,precipProbability:0}]},hourly:{summary:"Partly cloudy starting in the evening.",icon:"partly-cloudy-night",data:[{time:1427094e3,summary:"Clear",icon:"clear-night",precipIntensity:0,precipProbability:0,temperature:52.32,apparentTemperature:52.32,dewPoint:45.98,humidity:.79,windSpeed:3.25,windBearing:319,visibility:9.04,cloudCover:.18,pressure:1021.12,ozone:328.7},{time:1427097600,summary:"Clear",icon:"clear-night",precipIntensity:0,precipProbability:0,temperature:51.68,apparentTemperature:51.68,dewPoint:45.29,humidity:.79,windSpeed:4.19,windBearing:344,visibility:9.41,cloudCover:.12,pressure:1021.04,ozone:327.58},{time:1427101200,summary:"Clear",icon:"clear-night",precipIntensity:0,precipProbability:0,temperature:50.46,apparentTemperature:50.46,dewPoint:44.51,humidity:.8,windSpeed:4.03,windBearing:7,visibility:8.5,cloudCover:.07,pressure:1020.95,ozone:326.46},{time:1427104800,summary:"Clear",icon:"clear-night",precipIntensity:0,precipProbability:0,temperature:48.41,apparentTemperature:46.51,dewPoint:42.5,humidity:.8,windSpeed:4.75,windBearing:18,visibility:9.3,cloudCover:.07,pressure:1020.83,ozone:325.8},{time:1427108400,summary:"Clear",icon:"clear-night",precipIntensity:0,precipProbability:0,temperature:47.81,apparentTemperature:46.87,dewPoint:41.84,humidity:.8,windSpeed:3.35,windBearing:21,visibility:9.42,cloudCover:.18,pressure:1020.71,ozone:325.4},{time:1427112e3,summary:"Clear",icon:"clear-night",precipIntensity:0,precipProbability:0,temperature:47.77,apparentTemperature:46.21,dewPoint:42.13,humidity:.81,windSpeed:4.11,windBearing:19,visibility:9.6,cloudCover:.08,pressure:1020.71,ozone:325.49},{time:1427115600,summary:"Clear",icon:"clear-night",precipIntensity:0,precipProbability:0,temperature:48.25,apparentTemperature:47.05,dewPoint:42.2,humidity:.79,windSpeed:3.75,windBearing:14,visibility:9.3,cloudCover:.1,pressure:1020.61,ozone:326.36},{time:1427119200,summary:"Clear",icon:"clear-night",precipIntensity:0,precipProbability:0,temperature:48.01,apparentTemperature:46.05,dewPoint:41.69,humidity:.79,windSpeed:4.75,windBearing:14,visibility:9.35,cloudCover:.06,pressure:1020.92,ozone:327.71},{time:1427122800,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:51.19,apparentTemperature:51.19,dewPoint:44.17,humidity:.77,windSpeed:3.3,windBearing:2,visibility:9.79,cloudCover:.05,pressure:1021.22,ozone:328.91},{time:1427126400,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:57.32,apparentTemperature:57.32,dewPoint:47.27,humidity:.69,windSpeed:3.22,windBearing:335,visibility:9.95,cloudCover:.05,pressure:1021.33,ozone:329.73},{time:142713e4,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:61.84,apparentTemperature:61.84,dewPoint:49.91,humidity:.65,windSpeed:2.22,windBearing:237,visibility:9.97,cloudCover:.04,pressure:1021.31,ozone:330.39},{time:1427133600,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:65.2,apparentTemperature:65.2,dewPoint:48.76,humidity:.55,windSpeed:4.06,windBearing:242,visibility:10,cloudCover:.04,pressure:1021.15,ozone:330.9},{time:1427137200,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:67.78,apparentTemperature:67.78,dewPoint:51.88,humidity:.57,windSpeed:4.3,windBearing:259,visibility:10,cloudCover:.02,pressure:1020.9,ozone:331.23},{time:1427140800,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:69.5,apparentTemperature:69.5,dewPoint:53.41,humidity:.57,windSpeed:4.7,windBearing:258,visibility:10,cloudCover:.01,pressure:1020.48,ozone:331.41},{time:1427144400,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:69.76,apparentTemperature:69.76,dewPoint:52.54,humidity:.54,windSpeed:5.39,windBearing:255,visibility:9.99,cloudCover:.06,pressure:1020.02,ozone:331.52},{time:1427148e3,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:67.57,apparentTemperature:67.57,dewPoint:49.24,humidity:.52,windSpeed:7.7,windBearing:259,visibility:9.99,cloudCover:.05,pressure:1019.51,ozone:331.48},{time:1427151600,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:66.93,apparentTemperature:66.93,dewPoint:48.34,humidity:.51,windSpeed:6.81,windBearing:274,visibility:9.99,cloudCover:.05,pressure:1019.01,ozone:331.36},{time:1427155200,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:65.95,apparentTemperature:65.95,dewPoint:47.7,humidity:.52,windSpeed:6.61,windBearing:294,visibility:10,cloudCover:.06,pressure:1018.69,ozone:331.5},{time:1427158800,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:64.82,apparentTemperature:64.82,dewPoint:47.71,humidity:.54,windSpeed:7.13,windBearing:314,visibility:10,cloudCover:.12,pressure:1018.65,ozone:332.14},{time:1427162400,summary:"Clear",icon:"clear-day",precipIntensity:0,precipProbability:0,temperature:62.72,apparentTemperature:62.72,dewPoint:48.03,humidity:.59,windSpeed:7.69,windBearing:327,visibility:10,cloudCover:.18,pressure:1018.8,ozone:333.05},{time:1427166e3,summary:"Clear",icon:"clear-night",precipIntensity:0,precipProbability:0,temperature:59.94,apparentTemperature:59.94,dewPoint:47.11,humidity:.63,windSpeed:8.11,windBearing:339,visibility:10,cloudCover:.22,pressure:1019.06,ozone:333.86},{time:1427169600,summary:"Partly Cloudy",icon:"partly-cloudy-night",precipIntensity:0,precipProbability:0,temperature:58.5,apparentTemperature:58.5,dewPoint:46.65,humidity:.65,windSpeed:8.74,windBearing:345,visibility:10,cloudCover:.31,pressure:1019.46,ozone:334.29},{time:1427173200,summary:"Partly Cloudy",icon:"partly-cloudy-night",precipIntensity:0,precipProbability:0,temperature:57.63,apparentTemperature:57.63,dewPoint:46.44,humidity:.66,windSpeed:9.98,windBearing:350,visibility:10,cloudCover:.41,pressure:1019.93,ozone:334.62},{time:1427176800,summary:"Partly Cloudy",icon:"partly-cloudy-night",precipIntensity:0,precipProbability:0,temperature:56.83,apparentTemperature:56.83,dewPoint:45.86,humidity:.67,windSpeed:11.75,windBearing:356,visibility:10,cloudCover:.44,pressure:1020.27,ozone:335.29}]},daily:{summary:"Light rain on Sunday and Tuesday, with temperatures bottoming out at 60Â°F on Sunday.",icon:"rain",data:[{time:1427871600,summary:"Clear throughout the day.",icon:"clear-day",sunriseTime:1427896504,sunsetTime:1427941858,moonPhase:.42,precipIntensity:0,precipIntensityMax:0,precipProbability:0,temperatureMin:46.17,temperatureMinTime:1427893200,temperatureMax:62.62,temperatureMaxTime:1427922e3,apparentTemperatureMin:42.35,apparentTemperatureMinTime:1427893200,apparentTemperatureMax:62.62,apparentTemperatureMaxTime:1427922e3,dewPoint:41.95,humidity:.65,windSpeed:10.74,windBearing:327,visibility:9.54,cloudCover:.05,pressure:1020.76,ozone:345.22},{time:1427958e3,summary:"Clear throughout the day.",icon:"clear-day",sunriseTime:1427982815,sunsetTime:1428028310,moonPhase:.45,precipIntensity:0,precipIntensityMax:0,precipProbability:0,temperatureMin:45.08,temperatureMinTime:1427979600,temperatureMax:65.13,temperatureMaxTime:1428015600,apparentTemperatureMin:39.43,apparentTemperatureMinTime:1427979600,apparentTemperatureMax:65.13,apparentTemperatureMaxTime:1428015600,dewPoint:40.02,humidity:.6,windSpeed:12.05,windBearing:347,visibility:9.99,cloudCover:.01,pressure:1021.53,ozone:339.85},{time:1428044400,summary:"Partly cloudy overnight.",icon:"partly-cloudy-night",sunriseTime:1428069126,sunsetTime:1428114763,moonPhase:.48,precipIntensity:0,precipIntensityMax:0,precipProbability:0,temperatureMin:45.56,temperatureMinTime:1428062400,temperatureMax:65.22,temperatureMaxTime:1428102e3,apparentTemperatureMin:43.07,apparentTemperatureMinTime:1428062400,apparentTemperatureMax:65.22,apparentTemperatureMaxTime:1428102e3,dewPoint:44.39,humidity:.7,windSpeed:6.66,windBearing:329,visibility:10,cloudCover:.07,pressure:1021.35,ozone:339.26},{time:1428130800,summary:"Partly cloudy throughout the day.",icon:"partly-cloudy-day",sunriseTime:1428155438,sunsetTime:1428201215,moonPhase:.51,precipIntensity:0,precipIntensityMax:0,precipProbability:0,temperatureMin:44.26,temperatureMinTime:1428148800,temperatureMax:61.06,temperatureMaxTime:1428181200,apparentTemperatureMin:40.17,apparentTemperatureMinTime:1428148800,apparentTemperatureMax:61.06,apparentTemperatureMaxTime:1428181200,dewPoint:44.12,humidity:.75,windSpeed:10.63,windBearing:319,visibility:9.9,cloudCover:.58,pressure:1016.3,ozone:342.95},{time:1428217200,summary:"Light rain until afternoon.",icon:"rain",sunriseTime:1428241750,sunsetTime:1428287667,moonPhase:.54,precipIntensity:.0031,precipIntensityMax:.0096,precipIntensityMaxTime:1428249600,precipProbability:.83,precipType:"rain",temperatureMin:42.45,temperatureMinTime:1428242400,temperatureMax:60.2,temperatureMaxTime:1428274800,apparentTemperatureMin:40.23,apparentTemperatureMinTime:1428242400,apparentTemperatureMax:60.2,apparentTemperatureMaxTime:1428274800,dewPoint:40.44,humidity:.7,windSpeed:8.28,windBearing:293,cloudCover:.28,pressure:1015.64,ozone:376.94},{time:1428303600,summary:"Mostly cloudy throughout the day.",icon:"partly-cloudy-day",sunriseTime:1428328063,sunsetTime:1428374119,moonPhase:.57,precipIntensity:.0014,precipIntensityMax:.0044,precipIntensityMaxTime:1428386400,precipProbability:.13,precipType:"rain",temperatureMin:33.93,temperatureMinTime:1428321600,temperatureMax:60.94,temperatureMaxTime:1428361200,apparentTemperatureMin:33.93,apparentTemperatureMinTime:1428321600,apparentTemperatureMax:60.94,apparentTemperatureMaxTime:1428361200,dewPoint:39.67,humidity:.72,windSpeed:3.41,windBearing:226,cloudCover:.38,pressure:1017.12,ozone:373.48},{time:142839e4,summary:"Light rain until evening.",icon:"rain",sunriseTime:1428414376,sunsetTime:1428460572,moonPhase:.6,precipIntensity:.0148,precipIntensityMax:.0426,precipIntensityMaxTime:1428422400,precipProbability:1,precipType:"rain",temperatureMin:43.04,temperatureMinTime:1428411600,temperatureMax:62.71,temperatureMaxTime:1428447600,apparentTemperatureMin:39.2,apparentTemperatureMinTime:1428411600,apparentTemperatureMax:62.71,apparentTemperatureMaxTime:1428447600,dewPoint:45.39,humidity:.79,windSpeed:4.37,windBearing:242,cloudCover:.43,pressure:1016.12,ozone:371.72},{time:1428476400,summary:"Clear throughout the day.",icon:"clear-day",sunriseTime:1428500689,sunsetTime:1428547024,moonPhase:.64,precipIntensity:.0013,precipIntensityMax:.0026,precipIntensityMaxTime:1428494400,precipProbability:.07,precipType:"rain",temperatureMin:39.13,temperatureMinTime:1428494400,temperatureMax:66.01,temperatureMaxTime:1428534e3,apparentTemperatureMin:35.23,apparentTemperatureMinTime:1428494400,apparentTemperatureMax:66.01,apparentTemperatureMaxTime:1428534e3,dewPoint:42.62,humidity:.72,windSpeed:7.07,windBearing:319,cloudCover:0,pressure:1017.25,ozone:346.02}]},flags:{sources:["isd","fnmoc","sref","rtma","rap","nam","cmc","gfs","madis","lamp","darksky"],"isd-stations":["723924-99999","723926-99999","723927-93110","723929-99999","999999-23136"],"madis-stations":["AR137","AT184","AT185","AT490","C1484","C7664","C9814","D7412","D9923","E3136","E4795","LGRC1","RSVC1","SMNC1","SYCC1","VTUC1"],"lamp-stations":["KCMA","KNTD","KOXR","KSBA","KSDB"],"darksky-stations":["KVTX"],units:"us"}};return void this.parse(g)}var h=this,i=b.extend({type:"GET",dataType:"jsonp",url:h.url(),processDate:!1},e);return a.ajax(i)},parse:function(a){var b,c;if(a){var f=new d;return f.set("city",this.get("city")),f.set("state",this.get("state")),f.set("lat",this.get("latitude")),f.set("lng",this.get("longitude")),f.set("current",a.currently),f.set("tempMin",Math.round(a.daily.data[0].temperatureMin)),f.set("tempMax",Math.round(a.daily.data[0].temperatureMax)),this.set("forecast",a.daily),c=Math.round(a.currently.windSpeed),f.set("windSpeed",c),0===c?f.set("windSpeedIcon","sp0"):5>c?f.set("windSpeedIcon","sp5"):c>=5&&10>c?f.set("windSpeedIcon","sp10"):c>=10&&15>c?f.set("windSpeedIcon","sp15"):c>=15&&20>c?f.set("windSpeedIcon","sp20"):c>=20&&50>c?f.set("windSpeedIcon","sp50"):c>=50&&f.set("windSpeedIcon","sp65"),b=a.currently.windBearing,f.set("windBearing",b),22.5>=b||b>337.5?f.set("windDirection","north"):b>22.5&&67.5>=b?f.set("windDirection","northeast"):b>67.5&&112.5>=b?f.set("windDirection","east"):b>112.5&&157.5>=b?f.set("windDirection","southeast"):b>157.5&&202.5>=b?f.set("windDirection","south"):b>202.5&&247.5>=b?f.set("windDirection","southwest"):b>247.5&&292.5>=b?f.set("windDirection","west"):b>292.5&&337.5>=b&&f.set("windDirection","northwest"),new e({model:f}),f.set("ready",!f.get("ready")),console.log(f),this.set("ready",!0),a}}});return g});