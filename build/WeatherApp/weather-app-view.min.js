define(["jquery","underscore","backbone","../Geocode/geocodes.min","../Geocode/geocodeView.min","../Weather/weathers.min","../Weather/weatherView.min"],function(a,b,c,d,e,f,g){"use strict";var h="localhost"===window.location.hostname,i=c.View.extend({el:"#weather-app",events:{"keypress #city-search":"checkForEnter","click #current-btn":"validateInput"},initialize:function(){this.$input=this.$("#city-search"),this.$current=a("#weather-current"),this.geocodes=new d,this.listenTo(this.geocodes,"change:ready",this.addGeocode),this.weathers=new f,this.listenTo(this.weathers,"change:ready",this.addWeather)},render:function(){this.weathers.length?this.$current.show():this.$current.hide()},addWeather:function(a){var b=new g({model:a});this.$current.append(b.render().el)},addGeocode:function(a){var b,c=this.geocodes.models[0];return 1==this.weathers.length?(console.log("City: "+this.weathers.models[0].get("city")),this.weathers.models[0].set("city",c.get("city")),this.weathers.models[0].set("state",c.get("state")),this.weathers.models[0].set("latitude",c.get("latitude")),this.weathers.models[0].set("longitude",c.get("longitude")),this.weathers.models[0].sync(),void console.log("City 2: "+this.weathers.models[0].get("city"))):(b=new e({model:a}),void this.weathers.create({city:c.get("city"),state:c.get("state"),latitude:c.get("latitude"),longitude:c.get("longitude")}))},retrieveCoordinates:function(a){return console.log(this.geocodes.models.length),1===this.geocodes.length?(this.geocodes.models[0].set("city",a[0].trim()),this.geocodes.models[0].set("state",a[1].trim()),console.log(this.geocodes.models[0]),void this.geocodes.models[0].sync()):void this.geocodes.create({city:a[0].trim(),state:a[1].trim()})},validateInput:function(){if(!h)return this.$input[0].value="San Fransokyo, CA",void this.retrieveCoordinates(["San Fransokyo","CA"]);var a=this.$input.val().trim();if(!a)return void alert("You Need To Enter a City and State first");var b=a.split(",");return 2!==b.length?void alert('Enter The City and State in the form "City, State"'):void this.retrieveCoordinates(b)},checkForEnter:function(a){a.which===ENTER_KEY&&(console.log("reading input"),this.validateInput())},report:function(a){console.log("Reporting: "),console.log(a)}});return i});