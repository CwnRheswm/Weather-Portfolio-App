define(["jquery","underscore","backbone","../Geocode/geocodes.min","../Geocode/geocodeView.min","../Weather/weathers.min","../Weather/weatherView.min"],function(a,b,c,d,e,f,g){"use strict";var h=c.View.extend({el:"#weather-app",events:{"keypress #city-search":"checkForEnter","click #current-btn":"validateInput"},initialize:function(){this.$input=this.$("#city-search"),this.$current=a("#weather-current"),this.geocodes=new d,this.listenTo(this.geocodes,"change:ready",this.addGeocode),this.weathers=new f,this.listenTo(this.weathers,"change:ready",this.addWeather)},render:function(){this.weathers.length?this.$current.show():this.$current.hide()},addWeather:function(a){var b=new g({model:a});this.$current.append(b.render().el)},addGeocode:function(a){var b=(new e({model:a}),this.geocodes.models[0]);this.weathers.create({city:b.get("city"),state:b.get("state"),latitude:b.get("latitude"),longitude:b.get("longitude")}),console.log(b)},retrieveCoordinates:function(a){this.geocodes.create({city:a[0].trim(),state:a[1].trim()})},validateInput:function(){var a=this.$input.val().trim();if(!a)return void alert("You Need To Enter a City and State first");var b=a.split(",");return 2!==b.length?void alert('Enter The City and State in the form "City, State"'):void this.retrieveCoordinates(b)},checkForEnter:function(a){a.which===ENTER_KEY&&this.validateInput()}});return h});